Version 4
SHEET 1 3236 1600
WIRE 496 112 96 112
WIRE 736 112 576 112
WIRE -80 176 -144 176
WIRE 96 176 96 112
WIRE 96 176 0 176
WIRE 160 176 96 176
WIRE 320 176 240 176
WIRE -400 192 -496 192
WIRE -272 192 -320 192
WIRE -272 208 -272 192
WIRE -384 240 -512 240
WIRE -240 240 -336 240
WIRE -144 240 -144 176
WIRE -144 240 -240 240
WIRE 320 240 320 176
WIRE 736 272 736 112
WIRE -512 304 -512 240
WIRE -400 304 -512 304
WIRE -240 304 -240 240
WIRE -240 304 -336 304
WIRE 320 384 320 320
WIRE 736 400 736 352
WIRE -512 416 -512 304
WIRE -400 416 -512 416
WIRE -240 416 -240 304
WIRE -240 416 -320 416
WIRE -960 544 -1056 544
WIRE -768 544 -880 544
WIRE -512 544 -512 416
WIRE -512 544 -688 544
WIRE -400 544 -512 544
WIRE -240 544 -240 416
WIRE -240 544 -320 544
WIRE 992 544 880 544
WIRE 1232 544 992 544
WIRE 1344 544 1232 544
WIRE 1392 544 1344 544
WIRE 320 560 320 464
WIRE -1056 592 -1056 544
WIRE 736 592 736 480
WIRE 992 592 992 544
WIRE -1344 608 -1472 608
WIRE -1184 608 -1296 608
WIRE -1104 608 -1184 608
WIRE 1344 608 1344 544
WIRE 880 624 880 544
WIRE 1232 624 1232 544
WIRE -1472 656 -1472 608
WIRE -1296 656 -1296 608
WIRE -1104 656 -1136 656
WIRE -1344 672 -1344 608
WIRE -1056 704 -1056 672
WIRE -464 704 -1056 704
WIRE 320 704 320 640
WIRE 320 704 -464 704
WIRE 736 704 736 672
WIRE 736 704 320 704
WIRE -464 736 -464 704
WIRE 736 736 736 704
WIRE -1056 752 -1056 704
WIRE -1184 768 -1184 608
WIRE -1104 768 -1184 768
WIRE 880 768 880 704
WIRE 992 768 992 672
WIRE 992 768 880 768
WIRE 1232 768 1232 688
WIRE 1232 768 992 768
WIRE 1344 768 1344 688
WIRE 1344 768 1232 768
WIRE 320 800 320 704
WIRE 880 800 880 768
WIRE -1472 816 -1472 736
WIRE -1344 816 -1344 720
WIRE -1344 816 -1472 816
WIRE -1296 816 -1296 736
WIRE -1184 816 -1296 816
WIRE -1136 816 -1136 656
WIRE -1136 816 -1184 816
WIRE -1104 816 -1136 816
WIRE -1472 848 -1472 816
WIRE -1184 848 -1184 816
WIRE -1056 880 -1056 832
WIRE -960 880 -1056 880
WIRE -768 880 -880 880
WIRE -512 880 -688 880
WIRE -416 880 -512 880
WIRE -240 880 -336 880
WIRE 736 912 736 816
WIRE 320 976 320 880
WIRE -512 1008 -512 880
WIRE -416 1008 -512 1008
WIRE -240 1008 -240 880
WIRE -240 1008 -336 1008
WIRE 736 1056 736 992
WIRE -512 1120 -512 1008
WIRE -400 1120 -512 1120
WIRE -240 1120 -240 1008
WIRE -240 1120 -336 1120
WIRE 320 1120 320 1056
WIRE -400 1232 -480 1232
WIRE -272 1232 -320 1232
WIRE -272 1248 -272 1232
WIRE -512 1280 -512 1120
WIRE -384 1280 -512 1280
WIRE -240 1280 -240 1120
WIRE -240 1280 -336 1280
WIRE -48 1280 -240 1280
WIRE 96 1280 32 1280
WIRE 160 1280 96 1280
WIRE 320 1280 320 1200
WIRE 320 1280 240 1280
WIRE 96 1344 96 1280
WIRE 496 1344 96 1344
WIRE 736 1344 736 1136
WIRE 736 1344 576 1344
FLAG -464 736 0
FLAG -1472 848 0
FLAG 880 800 0
FLAG 1392 544 Vo
IOPIN 1392 544 Out
FLAG -272 208 0
FLAG -496 192 Vrs_sns
FLAG -272 1248 0
FLAG -480 1232 Vrc_sns
FLAG -1184 608 V_omega
IOPIN -1184 608 In
FLAG -1184 848 0
SYMBOL res 1328 592 R0
SYMATTR InstName R1
SYMATTR Value {RL}
SYMBOL cap 1216 624 R0
SYMATTR InstName C1
SYMATTR Value {Cf}
SYMBOL bi2 880 624 R0
SYMATTR InstName B1
SYMATTR Value I={ks} * I(V_Its_sns)
SYMBOL bi2 992 592 R0
SYMATTR InstName B2
SYMATTR Value I={kc} * I(V_Itc_sns)
SYMBOL voltage -1472 640 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName Vfb
SYMATTR Value ""
SYMBOL e -1056 576 R0
SYMATTR InstName E1
SYMATTR Value {Irc * Lr}
SYMBOL e -1056 736 R0
SYMATTR InstName E2
SYMATTR Value {Irs * Lr}
SYMBOL ind -976 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lr}
SYMBOL bv 736 384 R0
SYMATTR InstName B3
SYMATTR Value V=2* {ks} * V(Vo)
SYMBOL ind -976 896 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {Lr}
SYMBOL bv 736 1008 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B4
SYMATTR Value V= 2 * {kc} * V(Vo)
SYMBOL res 720 576 R0
SYMATTR InstName R2
SYMATTR Value {Rs}
SYMBOL res 720 720 R0
SYMATTR InstName R3
SYMATTR Value {Rc}
SYMBOL voltage 480 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V_Its_sns
SYMATTR Value 0
SYMBOL bv -672 544 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B5
SYMATTR Value V={Omega_s * Lr} * I(V_Irc_sns)
SYMBOL bv -784 880 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName B6
SYMATTR Value V={Omega_s * Lr} * I(V_Irs_sns)
SYMBOL cap -336 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {Cr}
SYMBOL bi2 -400 416 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 VBottom 2
SYMATTR InstName B7
SYMATTR Value I={Omega_s * Cr } * V(Vrc_sns)
SYMBOL bi2 -400 544 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 VBottom 2
SYMATTR InstName B8
SYMATTR Value I={Vrc * Cr } * V(V_omega)
SYMBOL cap -400 1136 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {Cr}
SYMBOL bi2 -336 1008 R90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 32 40 VTop 2
SYMATTR InstName B9
SYMATTR Value I={Omega_s * Cr} * V(Vrs_sns)
SYMBOL bi2 -336 880 R90
WINDOW 0 -32 40 VBottom 2
WINDOW 3 32 40 VTop 2
SYMATTR InstName B10
SYMATTR Value I={Vrs * Cr } * V(V_omega)
SYMBOL bv 736 256 R0
SYMATTR InstName B11
SYMATTR Value V={krs} * I(V_Itc_sns)
SYMBOL bv 736 1152 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B12
SYMATTR Value V= {krc} * I(V_Its_sns)
SYMBOL voltage 480 1344 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V_Itc_sns
SYMATTR Value 0
SYMBOL e -416 192 R270
SYMATTR InstName E3
SYMATTR Value 1
SYMBOL e -416 1232 R270
SYMATTR InstName E4
SYMATTR Value 1
SYMBOL ind 304 224 R0
SYMATTR InstName L3
SYMATTR Value {Lm}
SYMBOL bv 320 480 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B13
SYMATTR Value V={Omega_s * Lm} * I(V_Imc_sns)
SYMBOL ind 304 1104 R0
SYMATTR InstName L4
SYMATTR Value {Lm}
SYMBOL bv 320 1072 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B15
SYMATTR Value V={Omega_s * Lm} * I(V_Ims_sns)
SYMBOL voltage 144 1280 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V_Imc_sns
SYMATTR Value 0
SYMBOL voltage 144 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V_Ims_sns
SYMATTR Value 0
SYMBOL voltage -96 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V_Irs_sns
SYMATTR Value 0
SYMBOL voltage -64 1280 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V_Irc_sns
SYMATTR Value 0
SYMBOL bv 320 656 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B14
SYMATTR Value V={Ims * Lm} * V(V_omega)
SYMBOL bv 320 896 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName B16
SYMATTR Value V={Imc * Lm} * V(V_omega)
SYMBOL e -1296 640 R0
SYMATTR InstName E5
SYMATTR Value {2*pi*F0}
TEXT 1664 -104 Left 2 !* .param Lr = 360n\n* .param Lm = 2.1u\n* .param Cr = 110n\n* .param n = 5\n* .param Cf = 50u\n* .param RL = 1\n* .param Vg = 50\n \n.param Lr = 14u\n.param Lm = 60u\n.param Cr = 30n\n.param n = 4\n.param Cf = 660u\n.param RL = 2.3\n.param Vg = 400\n \n.param F0 = 1/(2*pi*sqrt(Lr*Cr))\n.param Z0 = sqrt(Lr/Cr)\n.param Req = 8* (n**2) * RL/(pi**2)\n.param Qeq = Z0 / Req\n.param fs = 1.2* F0\n.param Omega_s =2*pi*fs\n \n.param Xeq = Omega_s*Lr - 1/Omega_s/Cr\n \n.param Ln = Lm/Lr\n.param fn = fs/F0\n \n.param Its = (2*Vg/pi/Req) * Ln * (fn**2) * (Ln + 1 - 1/(fn**2)) / ((fn**2) * ((Ln + 1 - 1/(fn**2))**2) + (Qeq*Ln*((fn**2) -1))**2)\n.param Itc = (2*Vg/pi/Req) * (Ln**2) * fn * Qeq * (1 - (fn**2)) / ((fn**2) * ((Ln + 1 - 1/(fn**2))**2) + (Qeq*Ln*((fn**2) -1))**2)\n \n.param Ims = Itc * Req / Omega_s / Lm\n.param Imc = - Its * Req / Omega_s / Lm\n \n.param Irs = Its + Ims\n.param Irc = Itc + Imc\n \n.param Vrs = Irc / Omega_s / Cr\n.param Vrc = - Irs / Omega_s / Cr\n \n.param ks = (2*n/pi) * Its/sqrt((Its**2) + (Itc**2))\n.param kc = (2*n/pi) * Itc/sqrt(Its**2 + Itc**2)\n \n.param Vo = (pi/4/n) * Req * sqrt(Its**2 + Itc**2)\n \n.param Rs = (4*n*Vo/pi) * (Itc**2) / ((Its**2 + Itc**2)**1.5)\n.param Rc = -(4*n*Vo/pi) * (Its**2) / ((Its**2 + Itc**2)**1.5)\n \n.param krs = -(4*n*Vo/pi) * (Its * Itc) / ((Its**2 + Itc**2)**1.5)\n.param krc = krs
TEXT -216 -24 Left 2 ;5th order LLC small signal model control to output transfer function
TEXT 1112 984 Left 2 !.ac dec 100 10 100k
TEXT -1536 400 Left 2 ;Here 1V Vfb = F0, the frequency \nis proportional to Vfb value.\nd_omega/d_vfb = 2*pi*F0
